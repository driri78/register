<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/styles/register.css" />
  </head>
  <body>
    <h1>회원가입</h1>
    <form class="register-box" action="">
      <div class="userName-box">
        <label for="userName">이름: </label>
        <input type="text" id="userName" name="userName" />
      </div>
      <div class="userId-box">
        <label for="userId">아이디: </label>
        <input type="text" id="userId" name="userId" />
      </div>
      <div class="userPwd-box">
        <label for="userPwd">비밀번호: </label>
        <input type="password" id="userPwd" name="userPwd" autocomplete="off" />
      </div>
      <div class="userAddr-box">
        <label for="userAddr">주소: </label>
        <input type="text" id="userAddr" name="userAddr" />
      </div>
      <div class="userPhone-box">
        <label for="userPhone">전화번호: </label>
        <input type="text" id="userPhone" name="userPhone" />
      </div>
      <div class="userEmail-box">
        <label for="userEmail">이메일: </label>
        <input type="email" id="userEmail" name="userEmail" />
      </div>
      <button type="submit">회원가입</button>
    </form>
    <script>
      const registerBox = document.querySelector(".register-box");

      const inputUserName = document.querySelector("#userName");
      inputUserName.addEventListener("focusout", function () {
        const userName = this.value;
        console.log("포커스 아웃", this.value);
        const data = fetch("/register", {
          method: "POST",
          headers: { "content-type": "application/json" },
          body: JSON.stringify({ userName }),
        });
      });

      registerBox.addEventListener("submit", (e) => {
        e.preventDefault();
        const formData = {
          userName: document.querySelector("#userName").value,
          userId: document.querySelector("#userId").value,
          userPwd: document.querySelector("#userPwd").value,
          userAddr: document.querySelector("#userAddr").value,
          userPhone: document.querySelector("#userPhone").value,
          userEmail: document.querySelector("#userEmail").value,
        };
        console.log(JSON.stringify(formData));
        const data = fetch("/register", {
          method: "POST",
          headers: { "content-type": "application/json" },
          body: JSON.stringify(formData),
        })
          .then((res) => res.json())
          .then((res) => console.log(res.message));
      });
    </script>
  </body>
</html>
